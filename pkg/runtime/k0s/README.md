# k0s Runtime Design
## basefs

```shell
.
├── amd64
│   ├── bin
│   │   ├── k0s
│   │   ├── k0sctl
│   │   ├── kubectl
│   │   ├── nerdctl
│   │   └── seautil
│   ├── images
│   │   └── registry.tar.gz
│   └── Metadata
├── imageList
├── Kubefile
└── rootfs
    ├── etc
    │   ├── dump-config.toml
    │   └── registry.yml
    └── scripts
        ├── containerd.sh
        ├── init-registry.sh
        └── init.sh
```

## introduce
We define the k0s runtime have 5 phases to install/scale/reset the cluster.

basefs contain binary、shell script、config file and image. see more about [sealerio/basefs](https://github.com/sealerio/basefs)

Runtime before filesystem lead cluster install through execute [k0sctl](https://github.com/k0sproject/k0sctl) command.

+ Init
  + When sealer lead to cluster install first, init phase copy rootfs/bin to /usr/bin in init.sh script, make host ssh environment with no password, convert cluster file to k0sctl config, install the private registry.
+ Join
  + Join phase prepare the registry certs, and use `k0sctl apply` to reconcile the cluster.
+ Delete
  + Delete is same as join, but it recycles anything installed by join phase.
+ Reset
  + Reset through k0sctl to remove this cluster and remove anything about this cluster generated by sealer.
+ Upgrade
  + Upgrade can upgrade the k0s cluster.